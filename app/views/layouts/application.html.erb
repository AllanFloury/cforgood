<!DOCTYPE html>
<html>
<head>
  <title><%= yield(:title) || "Wagon Rails" %></title>
  <meta name="description" content="<%= (yield(:description) || "").squish %>">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <%= stylesheet_link_tag :application, media: "all" %>
  <%= csrf_meta_tags %>
</head>
<body id="<%= "#{controller_path.gsub('/', '_')}_#{action_name}" %>">
  <%#= render "shared/navbar" %>
  <%= render "shared/sidebar" %>

  <nav class='nav-bar'>
    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
    <a class="navbar-logo" href="/">
      <%= image_tag "logo.png" %>
    </a>
  </nav>
  <div class="margin-0">
    <%= image_tag "barre_navbar.png"%>
  </div>
  <%= render "shared/flashes" %>

  <div class="wrap">
    <%= yield %>
  </div>

  <%= render "shared/footer" %>

     <script>
       (function(document) {
         var toggle = document.querySelector('.sidebar-toggle');
         var sidebar = document.querySelector('#sidebar');
         var checkbox = document.querySelector('#sidebar-checkbox');
         document.addEventListener('click', function(e) {
           var target = e.target;
           if(!checkbox.checked ||
              sidebar.contains(target) ||
              (target === checkbox || target === toggle)) return;
           checkbox.checked = false;
         }, false);
       })(document);
     </script>


  <script src="//maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
   <script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>

   <%= javascript_include_tag "application" %>

  <%#= javascript_include_tag :application %>
  <%= yield(:after_js) %>

</body>
</html>
